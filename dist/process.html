<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>labb1</title>
    <script type="module" crossorigin src="/Labb1-frontend/assets/main-CqGJAyYF.js"></script>
    <link rel="stylesheet" crossorigin href="/Labb1-frontend/assets/main-BYo8frUz.css">
  </head>
  <body>
    <h1>Laboration 1</h1> 
    <header>
      <nav>
        <ul>
          <li><a href="index.html">Start</a></li>
          <li><a href="bilder.html">Bilder</a></li>
          <li><a href="process.html">Arbetsprocess</a></li>
        </ul>
      </nav>
    </header>
    <main class="description-text">
      <h2>Arbetsprocessen</h2>
      <h3>Verktyg</h3>
      <p>Jag har använt mig av GitHub, Git Bash som terminal, VS Code samt Vite för att göra denna laboration. Plugin/bibliotek som använts främst är: Vite-plugin-image-optimizer, Sharp</p>
      
      <h3>Start med Vite</h3>
      <p>För att komma igång med arbetet började jag med att, i den mapp där jag ville spara mitt projekt, öppna <b>Git Bash</b> och skrev <b>npm create vite@latest labb1</b>.
      Det sista här, labb1, var inte nödvändigt. Men det gick att göra så om jag ville döpa mappen där och då.</p>
      <p>I den nya mappen har ett "färdigt" projekt skapats, där jag kunde arbeta vidare på det som redan existerade eller radera om det fanns något jag inte ville ha. 
        Inne i denna mapp öppnade jag en ny terminal, och skrev <b>npm install</b>
      för att installera devDependencies från package.json.</p>
      <p>Härifrån var det bara att börja arbeta: ville jag så kunde jag redan innan jag fortsatte koppla projektet till min 
        GitHub med kommandot <b>git remote add origin https://din-github-här</b>. Därefter pusha till GitHub
      med kommandot <b>git push -u origin main</b>.</p>
      
      <h3>Steg 2: GitHub</h3>
      <p>Innan jag kunde pusha något så behövde jag ett repo att pusha till. Därför skapade jag först en tom repository på GitHub. När jag gjort första pushen skapade jag ytterligare
        en branch som fick heta <b>development</b>.</p>
      <p>Vid utvecklingen/skapandet av webbplatsen flyttade jag så att framtida commits/pushar går till development istället för main.</p>
      <p>Kontinuerligt under arbetet med webbplatsen försökte jag komma ihåg att commita och pusha till denna branch.</p>
      
      
      <h3>Steg 3: npm install och vite.config.js</h3>
        <p>I terminalen skrev jag <b>npm install</b> paket, där paket är namnet på själva pluginet (t.ex. vite-plugin-image-optimizer).</p>
        <p>Jag skapade en egen fil som fick heta vite.config.js. I denna fil kunde jag manuellt skriva in vilka plugins jag använder och vilka kod-filer som ska byggas samt buntas.</p>
        <p>Jag använde mig av<a href="https://rifkiaf.medium.com/optimize-your-static-image-automatically-with-this-vite-plugin-33e8d1fada22">
        Rifki Ahmad Fahrezis post</a> om hur man kan använda vite + plugin för att optimisera bilder (se mer under <i>Intallerade plugin/bibliotek</i>). Genom att skriva in i en ny fil - 
        vite.config.js - så kunde jag hämta plugin och specifiera hur bra kvalitén på bilder skulle vara: man kan specifiera om jpg ska bevara högre kvalité än webp osv.</p>
        <p>Med rollupOptions i vite.config.js säger jag åt vite vilka filer som ska byggas (mina tre HTML filer) och hamnar i dist (distributions) mappen.</p>
      
        <h3>Steg 4: Bilderna</h3>
          <p>Jag placerade mina original bilder src mappen. Dessa är stora bilder som är några MB stora. Jag testade, efter installation av plugins och dyl., att köra <b>npm run build</b> för 
          att se om bilderna skulle optimeras. Det syntes en förändring: nästan alla bilder blev större istället för mindre. Förbryllande.</p>
          <p>Testade att via Photopea skapa bildstorlekar i både WEBP och JPG: 400px i bredd samt 800px i bredd.</p>
          <p>Efter att ha placerat dessa i src mappen testade jag <b>npm run build</b> igen. De enorma bilderna blev fortfarande optimerade uppåt, men de komprimerade bilderna blev, som det först
          var tänkt, optimerade ner.</p>
          <p>Filer i src mappen kommer att behandlas av Vite. Hade de varit i public skulle de inte ha blivit rörda.</p>
          <p>Jag hade helt enkelt kunnat nöja mig med vanliga jpg filer, och därifrån justera vite.config.js för att optimisera dem ordentligt.
          </p>
          
        <h3>Automatisering</h3>
      <p>Vad som har blivit automatiserat är:</p>
      <ul>
        <li>Bilder blir optimiserade vid <b>npm run build</b></li>
        <li>CSS minifieras och, om det funnits fler CSS filer, buntas. HTML minifieras, vid <b>npm run build</b></li>
      </ul>
      
      <h3>Installerade plugin/bibliotek</h3>
      <p>Med hjälp av länken ovan har jag installerat:</p>
        <ul>
          <li>Sharp</li>
          <li>SVGO</li>
          <li>Vite-imagetools</li>
          <li>Vite-plugin-image-optimizer</li>
          <li>React</li>
        </ul>
        <p>Då inte alla dessa verktyg kom till användning så testade jag <b>npm uninstall</b> på vite-imagetools och SVGO.</p>
      
        <h3>Slutet: skräckscenario</h3>
        <p>Vid publicering stötte jag på problem: HTML filerna visades vid publicering, men ingen CSS eller bilder.</p>
        <ul>
          <li>Testade att slå ihop mina två branches: fungerade inte.</li>
          <li>Testade att köra npm run build igen: inget resultat.</li>
          <li>Använde Google för hjälp: nämnde att i vite.config.js kan man behöva konfigurera med base: "/ditt-repo-namn/". Fungerade inte.</li>
          <li>Hade stavat fel: råkade placera / utanför citationstecknen. Rättade, men fungerade fortfarande inte.</li>
          <li>Det är ju filer i dist som ska användas, men den mappen var i gitignore. Testade att kommentera bort den.</li>
        </ul>
        <p>Ungefär på detta vis fortsatte det tills jag stötte på att man kan installera ett paket som heter <b>gh pages</b>. Skrev: <b>npm install --save-dev gh-pages</b>.</p>
        <p>Konfigurerade package.json med <b>"deploy": "gh-pages -d dist"</b></p>
        <p>Kommandot <b>npm run build</b> bara för att vara säker.</p>
        <p>Sedan git add, git commit och git push till min main branch. Slutligen npm run deploy.</p>
        <p>Detta skapade en ny branch som heter gh-pages där alla dist filer sparas. All källkod sparas i main: pga gitignore där så "finns" inte dist. </p>
        <p>Hoppades och bad: och tack och lov fungerade det.</p>
    </main>
    <footer>
      <p>Moa Brunemo</p>
      <p>mobr2500@student.miun.se</p>
      <p>DT211G</p>
    </footer>
  </body>
</html>